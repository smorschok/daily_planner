(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{65:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),s=n.n(r),i=(n(65),n(7)),o=n.n(i),l=n(9),u=n(8),d=n(54),j=n(86),b=n(83),h=n(15),O=Object(a.createContext)({token:null,userId:null,login:function(e,t,n){},logout:function(){},isAuthenticated:!1,admin:!1,email:null}),x=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(u.a)(r,2),i=s[0],d=s[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,s,i,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},c(!0),e.prev=4,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:r});case 8:return s=e.sent,e.next=11,s.json();case 11:if(i=e.sent,s.ok){e.next=14;break}throw new Error(i.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return c(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),c(!1),d(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(a.useCallback)((function(){return d(null)}),[])}},f=n(53),m=n(1),v=function(){var e=c.a.forwardRef((function(e,t){var n=e.children,a=e.onClick;return Object(m.jsxs)(d.a,{ref:t,onClick:function(e){e.preventDefault(),a(e)},children:[n,Object(m.jsx)("i",{className:"bi bi-list",style:{fontSize:"2rem"}})]})})),t=Object(a.useContext)(O),n=x().request,r=Object(a.useState)(!1),s=Object(u.a)(r,2),i=s[0],v=s[1],p=Object(f.useMediaQuery)({query:"(max-width: 800px)"}),g=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/user/status","POST",null,{Authorization:"Bearer ".concat(t.token)});case 3:v(!i),t.logout(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return p&&t.isAuthenticated?Object(m.jsxs)(j.a,{expand:"sm",className:"navbar  bg-primary justify-content-between",children:[Object(m.jsx)("h1",{style:{color:"#fff"},children:"Daily planner"}),Object(m.jsxs)(b.a,{show:i,onToggle:function(){return v(!i)},drop:"down",className:"d-flex justify-content-end",children:[Object(m.jsx)(b.a.Toggle,{as:e,variant:"success",id:"dropdown-basic"}),Object(m.jsxs)(b.a.Menu,{align:"right",className:"bg-white text-right",children:[Object(m.jsxs)(b.a.Header,{children:[" ",!!t.email&&Object(m.jsx)("h6",{className:"text-right",children:t.email})]}),Object(m.jsx)(b.a.Divider,{}),t.admin&&Object(m.jsx)(h.b,{onClick:function(){return v(!i)},activeClassName:"navlink-active-dropdown",className:"navbar-brand",to:"/admin",hidden:!t.admin,children:"Admin"}),Object(m.jsx)(b.a.Divider,{}),t.isAuthenticated&&Object(m.jsx)(h.b,{onClick:function(){return v(!i)},activeClassName:"navlink-active-dropdown",className:"navbar-brand",to:"/calendar",hidden:!t.isAuthenticated,children:"Calendar"}),Object(m.jsx)(b.a.Divider,{}),t.isAuthenticated&&Object(m.jsx)(h.b,{onClick:function(){return v(!i)},activeClassName:"navlink-active-dropdown",className:"navbar-brand",to:"/notes",hidden:!t.isAuthenticated,children:"Your notes"}),Object(m.jsx)(b.a.Divider,{}),t.isAuthenticated&&Object(m.jsx)(h.b,{exact:!0,activeClassName:"navlink-active-dropdown",className:"navbar-brand",to:"/",onClick:g,hidden:!t.isAuthenticated,children:"Logout"})]})]})]}):Object(m.jsxs)(j.a,{expand:"sm",className:"navbar navbar-dark bg-primary justify-content-between",children:[Object(m.jsx)("h1",{style:{color:"#fff"},children:"Daily planner"}),Object(m.jsxs)("div",{children:[!!t.email&&Object(m.jsx)("div",{className:"text-right",style:{color:"#fff"},children:t.email}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[t.admin&&Object(m.jsx)(h.b,{activeClassName:"navlink-active",className:"navbar-brand",to:"/admin",hidden:!t.admin,children:"Admin"}),t.isAuthenticated&&Object(m.jsx)(h.b,{activeClassName:"navlink-active",className:"navbar-brand",to:"/calendar",hidden:!t.isAuthenticated,children:"Calendar"}),t.isAuthenticated&&Object(m.jsx)(h.b,{activeClassName:"navlink-active",className:"navbar-brand",to:"/notes",hidden:!t.isAuthenticated,children:"Your notes"}),t.isAuthenticated&&Object(m.jsx)(d.a,{className:"navbar-brand",onClick:g,hidden:!t.isAuthenticated,children:"Logout"})]})]})]})},p=n(13),g=n(29),y=n(11),k=function(){return Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"spinner-border text-info",style:{width:"6rem",height:"6rem"},role:"status"})})},N=function(e){var t=e.noteList,n=e.deleteNoteHandler;return Object(m.jsxs)(m.Fragment,{children:[t.map((function(e,t){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("h6",{className:"m-0 p-2",children:[e.day<10?"0"+e.day:e.day,".",e.month+1<10?"0"+(e.month+1):e.month+1,".",e.year," ",e.hour,":00"]}),Object(m.jsx)(d.a,{variant:"light",className:"d-flex bi bi-x pl-1 pr-1 pt-1 pb-1",style:{fontSize:"1.2rem"},onClick:function(){return n(e)}})]}),Object(m.jsx)("p",{className:"p-2",children:e.text})]},t)})),0===t.length&&Object(m.jsx)("div",{className:"card card-body ",children:Object(m.jsx)("h3",{className:"text-center",children:"There are no notes"})})]})},C=n(85),w=function(e){var t=e.handleDateChange,n=e.date,a=e.option,c=e.name;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(C.a.Group,{className:"mb-2",children:Object(m.jsxs)(C.a.Control,{as:"select",custom:!0,className:"form-select mr-1",onChange:t,value:n,name:c,children:[12===a.length&&a.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e},e)})),12!==a.length&&a.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))]})})})},S=function(e){var t=e.handleFirstDateChange,n=e.handleSecondDateChange,a=e.firstDate,c=e.secondDate,r=e.listDays,s=e.listYears,i=e.monthName;return Object(m.jsxs)("div",{className:"container ",children:[Object(m.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(m.jsx)("span",{className:"mb-1",children:"from"}),Object(m.jsxs)(C.a,{className:"d-flex",children:[Object(m.jsx)(w,{handleDateChange:t,date:a.month,option:i,name:"month"}),Object(m.jsx)(w,{handleDateChange:t,date:a.day,option:r.firstListDays,name:"day"}),Object(m.jsx)(w,{handleDateChange:t,date:a.year,option:s.firstListYears,name:"year"})]})]}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(m.jsx)("span",{className:"mb-1",children:"to"}),Object(m.jsxs)(C.a,{className:"d-flex ",children:[Object(m.jsx)(w,{handleDateChange:n,date:c.month,option:i,name:"month"}),Object(m.jsx)(w,{handleDateChange:n,date:c.day,option:r.secondListDays,name:"day"}),Object(m.jsx)(w,{handleDateChange:n,date:c.year,option:s.secondListYears,name:"year"})]})]})})]})},D=n(39),A=function(){return{error:Object(a.useCallback)((function(e){D.b.error(e)}),[]),success:Object(a.useCallback)((function(e){D.b.success(e)}),[])}},E=function(){var e=new Date,t=Object(a.useContext)(O),n=A(),c=Object(a.useState)([]),r=Object(u.a)(c,2),s=r[0],i=r[1],d=x(),j=d.request,b=d.error,h=d.clearError,f=d.loading,v=Object(a.useState)({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}),p=Object(u.a)(v,2),C=p[0],w=p[1],D=Object(a.useState)({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}),E=Object(u.a)(D,2),T=E[0],P=E[1],F=Object(a.useState)({firstListYears:[],secondListYears:[]}),L=Object(u.a)(F,2),Y=L[0],B=L[1],M=Object(a.useState)({firstListDays:[],secondListDays:[]}),I=Object(u.a)(M,2),z=I[0],H=I[1],G=Object(a.useState)([]),J=Object(u.a)(G,2),_=J[0],q=J[1],U=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("api/user/","GET",null,{Authorization:"Bearer ".concat(t.token)});case 3:n=e.sent,i(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[j,t.token]);Object(a.useEffect)((function(){b&&(n.error(b),h())}),[b,h,n]),Object(a.useEffect)((function(){U()}),[U]);var R=Object(a.useCallback)((function(e){for(var t=[],n=0,a=e.year-5,c=e.year+5,r=a;r<c;r++)t[n++]=r;return t}),[]);Object(a.useEffect)((function(){B((function(e){return Object(y.a)(Object(y.a)({},e),{},{firstListYears:R(C)})}))}),[R,C]),Object(a.useEffect)((function(){B((function(e){return Object(y.a)(Object(y.a)({},e),{},{secondListYears:R(T)})}))}),[R,T]);var Q=Object(a.useCallback)((function(e){for(var t=[],n=0,a=new Date(e.year,e.month+1,0).getDate(),c=1;c<=a;c++)t[n++]=c;return t}),[]);Object(a.useEffect)((function(){H((function(e){return Object(y.a)(Object(y.a)({},e),{},{firstListDays:Q(C)})}))}),[Q,C]),Object(a.useEffect)((function(){H((function(e){return Object(y.a)(Object(y.a)({},e),{},{secondListDays:Q(T)})}))}),[Q,T]);var K=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("api/user/show","POST",_,{Authorization:"Bearer ".concat(t.token)});case 3:n=e.sent,i(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),V=Object(a.useCallback)((function(){var e=new Date(C.year,C.month,C.day),t=new Date(T.year,T.month,T.day),n=0,a=[];for(a[0]={year:e.getFullYear(),month:e.getMonth(),days:[]};e<=t;)a[n].year===e.getFullYear()&&a[n].month===e.getMonth()||(a[++n]={year:0,month:0,days:[]}),a[n].year!==e.getFullYear()&&(a[n].year=e.getFullYear()),a[n].month!==e.getMonth()&&(a[n].month=e.getMonth()),-1===a[n].days.indexOf(e.getDate())&&a[n].days.push(e.getDate()),e.setDate(e.getDate()+1);q(a)}),[C,T]);Object(a.useEffect)((function(){V()}),[V]);var W=function(){var e=Object(l.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("/api/date/delete","POST",Object(y.a)({},a),{Authorization:"Bearer ".concat(t.token)});case 3:c=e.sent,U(),n.success(c.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"container pb-2",children:[Object(m.jsx)(S,{handleFirstDateChange:function(e){w(Object(y.a)(Object(y.a)({},C),{},Object(g.a)({},e.target.name,parseInt(e.target.value,10))))},handleSecondDateChange:function(e){P(Object(y.a)(Object(y.a)({},T),{},Object(g.a)({},e.target.name,parseInt(e.target.value,10))))},firstDate:C,secondDate:T,listDays:z,listYears:Y,monthName:["January","February","March","April","May","June","July","August","September","October","November","December"]}),Object(m.jsx)("div",{className:"container text-center mb-2",children:Object(m.jsx)("button",{type:"button",className:"btn btn-info",onClick:K,children:"Get notes"})}),f&&Object(m.jsx)(k,{}),!f&&Object(m.jsx)(N,{noteList:s,deleteNoteHandler:W})]})},T=Object(a.createContext)({error:function(e){},success:function(e){}}),P=function(){var e=Object(a.useContext)(O),t=x(),n=t.loading,c=t.request,r=t.error,s=t.clearError,i=Object(a.useContext)(T),j=Object(a.useState)({email:"",password:""}),b=Object(u.a)(j,2),h=b[0],f=b[1];Object(a.useEffect)((function(){r&&(i.error(r),s())}),[r,s,i]);var v=function(e){f(Object(y.a)(Object(y.a)({},h),{},Object(g.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("api/auth/register","POST",Object(y.a)({},h));case 3:t=e.sent,i.success(t.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("api/auth/login","POST",Object(y.a)({},h));case 3:n=t.sent,e.login(n.token,n.userId,n.admin,n.user),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container d-flex justify-content-center pt-4",children:Object(m.jsx)("div",{className:"col-sm-6 border border-primary p-4",children:Object(m.jsxs)(C.a,{children:[Object(m.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsx)(C.a.Label,{children:"Email address"}),Object(m.jsx)(C.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:v})]}),Object(m.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(m.jsx)(C.a.Label,{children:"Password"}),Object(m.jsx)(C.a.Control,{name:"password",type:"password",placeholder:"Password",onChange:v})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)(d.a,{variant:"primary",className:"mr-1 border border-dark",onClick:k,disabled:n,children:"Sign in"}),Object(m.jsx)(d.a,{variant:"light",className:"ml-1 border border-dark",onClick:p,disabled:n,children:"Sign up"})]})]})})})},F=n(57),L=n(58),Y=n(60),B=n(59),M=[31,28,31,30,31,30,31,31,30,31,30,31];function I(e){var t=e.getMonth();return function(e){return!(e%4||!(e%100)&&e%400)}(e.getFullYear())&&1===t?M[t]+1:M[t]}function z(e,t){return!(!e||!t)&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())}var H=n(4),G=n.n(H),J=n(84),_=function(e){var t=e.handleChange,n=e.getText,c=e.addChangeNote,r=e.hourActive,s=Object(a.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],j=function(){return l(!1)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(J.a,{show:o,onHide:j,backdrop:"static",keyboard:!1,animation:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(m.jsxs)(J.a.Dialog,{children:[Object(m.jsx)(J.a.Header,{closeButton:!0,children:Object(m.jsx)(J.a.Title,{id:"contained-modal-title-vcenter",children:"Enter the text"})}),Object(m.jsx)(J.a.Body,{children:Object(m.jsx)("textarea",{className:"form-control",name:"text",onChange:t})}),Object(m.jsxs)(J.a.Footer,{children:[Object(m.jsx)(d.a,{variant:"secondary",onClick:j,children:"Close"}),Object(m.jsx)(d.a,{variant:"primary",onClick:function(){j(),n()},children:"Add"})]})]})}),Object(m.jsx)("div",{className:"text-right",children:Object(m.jsx)(d.a,{className:"m-2",variant:"primary",onClick:function(){return l(!0)},disabled:!r,children:c})})]})},q=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],U=function(e){var t=e.year,n=e.month,c=e.day,r=Object(a.useContext)(O),s=x(),i=s.request,j=s.error,b=s.clearError,h=s.loading,f=Object(a.useContext)(T),v=Object(a.useState)(n),p=Object(u.a)(v,2),g=p[0],C=p[1],w=Object(a.useState)(t),S=Object(u.a)(w,2),D=S[0],A=S[1],E=Object(a.useState)({year:0,month:0,day:0,hour:0,text:""}),P=Object(u.a)(E,2),F=P[0],L=P[1],Y=Object(a.useState)(),B=Object(u.a)(Y,2),M=B[0],I=B[1],z=Object(a.useState)(0),H=Object(u.a)(z,2),J=H[0],U=H[1],R=Object(a.useState)([]),Q=Object(u.a)(R,2),K=Q[0],V=Q[1],W=Object(a.useState)("\u0422\u0435\u043a\u0441\u0442\u0430 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"),X=Object(u.a)(W,2),Z=X[0],$=X[1],ee=Object(a.useState)("Add note"),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(!1),re=Object(u.a)(ce,2),se=re[0],ie=re[1];Object(a.useEffect)((function(){C(n)}),[n]),Object(a.useEffect)((function(){A(t)}),[t]),Object(a.useEffect)((function(){L({year:t,month:n,day:c,hour:J,text:Z})}),[t,n,c,J,Z]),Object(a.useEffect)((function(){j&&(f.error(j),b())}),[j,b,f]);var oe=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/date/note","POST",{getYear:D,getMonth:g},{Authorization:"Bearer ".concat(r.token)});case 3:t=e.sent,I(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,D,g,r.token]);Object(a.useEffect)((function(){oe()}),[oe]);var le=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/date","POST",Object(y.a)({},F),{Authorization:"Bearer ".concat(r.token)});case 3:t=e.sent,oe(),f.success(t.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ue=Object(a.useCallback)((function(){if(!se&&M){var e=M.filter((function(e){return e.year===F.year&&e.month===F.month&&e.day===F.day}));e.length>0?V(e):V([])}if(se&&M){var t=M.filter((function(e){return e.year===F.year&&e.month===F.month&&e.day===F.day&&e.hour===F.hour}));t.length>0?(V(t),ae("Change note")):(V([]),ae("Add note"))}}),[M,F,se]);Object(a.useEffect)((function(){ue()}),[ue,M]);var de=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/date/delete","POST",Object(y.a)({},t),{Authorization:"Bearer ".concat(r.token)});case 3:n=e.sent,oe(),f.success(n.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"text-right",children:Object(m.jsx)(d.a,{onClick:function(){ie(!1),ae("Add note"),U(0)},disabled:!se,children:"All notes for the selected day"})}),Object(m.jsx)("h5",{className:"text-center",children:"Select an hour"}),Object(m.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:q.map((function(e,t){return Object(m.jsx)("span",{className:G()("border hover fs-6 badge text-dark m-1",{"bg-info-active":t===F.hour&&se}),onClick:function(){return function(e){U(e),ie(!0)}(t)},children:e},t)}))})]}),Object(m.jsxs)("div",{className:"pl-2",children:[Object(m.jsx)("h6",{children:"Selected date: "}),Object(m.jsxs)("h6",{children:[c<10?"0"+c:c,".",n+1<10?"0"+(n+1):n+1,".",t," ",J,":00"]})]}),!h&&Object(m.jsx)(N,{noteList:K,deleteNoteHandler:de}),h&&Object(m.jsx)(k,{})]}),Object(m.jsx)(_,{handleChange:function(e){$(e.target.value)},getText:le,addChangeNote:ne,hourActive:se})]})},R=function(e){Object(Y.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(F.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={date:e.props.date,currentDate:new Date,selectedDate:null},e.yearSelect=null,e.monthSelect=null,e.handlePrevMonth=function(){var t=new Date(e.year,e.month-1);e.setState({date:t})},e.handleNextMonth=function(){var t=new Date(e.year,e.month+1);e.setState({date:t})},e.handleSelectedChange=function(){var t=e.yearSelect.value,n=e.monthSelect.value,a=new Date(t,n);e.setState({date:a})},e.handleDayClick=function(t){e.setState({selectedDate:t})},e}return Object(L.a)(n,[{key:"year",get:function(){return this.state.date.getFullYear()}},{key:"month",get:function(){return this.state.date.getMonth()}},{key:"day",get:function(){return this.state.date.getDate()}},{key:"selectedYears",get:function(){for(var e=[],t=0,n=this.state.date.getFullYear()-5;n<this.state.date.getFullYear()+5;n++)e[t++]=n;return e}},{key:"render",value:function(){var e=this,t=this.props,n=t.monthName,a=t.weekDayNames,c=this.state,r=c.selectedDate,s=c.currentDate,i=function(e,t){for(var n=[],a=new Date(e,t),c=I(new Date(e,t-1)),r=1,s=I(a),i=function(e){var t=e.getDay();return 0===t?6:t-1}(a),o=[],l=1,u=0;u<6;u++){n[u]=[];for(var d=0;d<7;d++)0===u&&d<i?o[d]=new Date(e,t-1,c--):n[u][d]=l>s?new Date(e,t+1,r++):new Date(e,t,l++)}o.reverse();var j=o.concat(n[0]).filter((function(e){return e}));return n[0]=j,n}(this.year,this.month);return Object(m.jsxs)("div",{className:"calendar container card mt-2",children:[Object(m.jsx)("h1",{className:"text-center",children:"CALENDAR"}),Object(m.jsxs)("header",{className:"d-flex justify-content-around",children:[Object(m.jsx)("button",{className:"btn fs-5 mb-3",onClick:this.handlePrevMonth,children:Object(m.jsx)("i",{className:" bi-arrow-left-circle-fill d-flex justify-content-center"})}),Object(m.jsxs)(C.a,{className:"d-flex justify-content-around align-items-center",children:[Object(m.jsx)(C.a.Group,{children:Object(m.jsx)(C.a.Control,{as:"select",custom:!0,className:"form-select mr-1",onChange:this.handleSelectedChange,value:this.month,ref:function(t){return e.monthSelect=t},children:n.map((function(e,t){return Object(m.jsx)("option",{value:t,children:e},e)}))})}),Object(m.jsx)(C.a.Group,{children:Object(m.jsx)(C.a.Control,{as:"select",custom:!0,className:"form-select ml-1",onChange:this.handleSelectedChange,value:this.year,ref:function(t){return e.yearSelect=t},children:this.selectedYears.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))})})]}),Object(m.jsx)("button",{className:"btn fs-5 mb-3",onClick:this.handleNextMonth,children:Object(m.jsx)("i",{className:"bi bi-arrow-right-circle-fill d-flex justify-content-center"})})]}),Object(m.jsxs)("table",{className:"table table-bordered mt-2",children:[Object(m.jsx)("thead",{className:"text-center",children:Object(m.jsx)("tr",{children:a.map((function(e){return Object(m.jsx)("th",{children:e},e)}))})}),Object(m.jsx)("tbody",{children:i.map((function(t,n){return Object(m.jsx)("tr",{className:"text-center",children:t.map((function(t,n){return Object(m.jsx)("td",{className:G()("hover",{"border border-5":z(t,s),"bg-info-active":z(t,r)}),onClick:function(){e.handleDayClick(t)},children:t.getDate()},n)}))},n)}))})]}),r&&Object(m.jsx)(U,{year:r.getFullYear(),month:r.getMonth(),day:r.getDate()})]})}}]),n}(c.a.Component);R.defaultProps={date:new Date,monthName:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDayNames:["\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441"]};var Q=n(81),K=n(56),V=n(88),W=function(e){for(var t=e.currentPage,n=e.postsPerPage,a=e.totalPosts,c=e.paginate,r=e.pageSize,s=e.paginatePrev,i=e.paginateNext,o=[],l=1;l<=Math.ceil(a/n);l++)o.push(l);return Object(m.jsxs)("div",{className:"p-2",children:[Object(m.jsxs)("div",{children:["Total users : ",a]}),Object(m.jsx)(C.a,{className:" d-flex ",children:Object(m.jsxs)(C.a.Group,{as:Q.a,className:"justify-content-center align-items-center",controlId:"exampleForm.SelectCustom",children:[Object(m.jsx)(C.a.Label,{column:!0,children:"Page size"}),Object(m.jsx)(K.a,{children:Object(m.jsxs)(C.a.Control,{size:"sm",value:n,onChange:r,as:"select",custom:!0,children:[Object(m.jsx)("option",{value:5,children:"5"}),Object(m.jsx)("option",{value:10,children:"10"}),Object(m.jsx)("option",{value:15,children:"15"}),Object(m.jsx)("option",{value:20,children:"20"}),Object(m.jsx)("option",{value:a,children:"All users"})]})})]})}),Object(m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:Object(m.jsxs)(V.a,{className:"m-1 container d-flex flex-wrap justify-content-center",children:[Object(m.jsx)(V.a.Prev,{disabled:1===t,onClick:s}),o.map((function(e){return Object(m.jsx)(V.a.Item,{active:t===e,onClick:function(t){return c(t,e)},children:e},e)})),Object(m.jsx)(V.a.Next,{disabled:t===o.length,onClick:function(){return i(o)}})]})})]})},X=function(e){var t=e.search;return Object(m.jsx)(C.a,{children:Object(m.jsx)(C.a.Group,{className:"m-2",children:Object(m.jsx)(C.a.Control,{onChange:function(e){return t(e)},type:"text",placeholder:"Search by email"})})})},Z=n(82),$=function(e){var t=e.users,n=e.onToggleUser,c=e.getAllCheck,r=e.selectedUsers,s=Object(a.useContext)(O);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Z.a,{hover:!0,responsive:"sm",size:"sm",bordered:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"text-center",children:Object(m.jsx)("input",{onChange:function(){return c()},checked:r.length===t.length,type:"checkbox"})}),Object(m.jsx)("th",{children:"email"}),Object(m.jsx)("th",{children:"Number of notes"}),Object(m.jsx)("th",{children:"Active"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Access"}),Object(m.jsx)("th",{})]})}),Object(m.jsx)("tbody",{children:t.filter((function(e){return e._id!==s.userId})).map((function(e){return Object(m.jsxs)("tr",{className:G()("",{"table-hover tbody tr active":r.includes(e._id),"tr blocked":e.block}),children:[Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)("input",{onChange:function(){return n(e._id)},type:"checkbox",checked:r.includes(e._id)})}),Object(m.jsx)("td",{children:e.email}),Object(m.jsx)("td",{children:e.owner.length}),Object(m.jsx)("td",{children:e.active?"online":"not online"}),Object(m.jsx)("td",{children:e.block?"blocked":"not blocked"}),Object(m.jsx)("td",{children:e.admin?"admin":"user"}),Object(m.jsx)("td",{children:Object(m.jsx)(h.b,{to:"/admin/".concat(e._id),children:"Check"})})]},e._id)}))})]})})},ee=function(e){var t=e.users,n=e.deleteHandler,a=e.blockHandler,c=e.unlockHandler,r=e.addAdminHandler,s=e.removeAdminHandler;return Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsxs)(b.a,{navbar:!0,className:"m-2",children:[Object(m.jsx)(b.a.Toggle,{variant:"success",id:"dropdown-basic",children:"Options"}),Object(m.jsxs)(b.a.Menu,{children:[Object(m.jsx)(b.a.Header,{children:"Block/Unblock"}),Object(m.jsx)(b.a.Item,{onClick:function(){return a(t)},children:"Block"}),Object(m.jsx)(b.a.Item,{onClick:function(){return c(t)},children:"Unlock"}),Object(m.jsx)(b.a.Divider,{}),Object(m.jsx)(b.a.Header,{children:"Add/Remove Admin"}),Object(m.jsx)(b.a.Item,{onClick:function(){return r(t)},children:"Add admin"}),Object(m.jsx)(b.a.Item,{onClick:function(){return s(t)},children:"Remove admin"}),Object(m.jsx)(b.a.Divider,{}),Object(m.jsx)(b.a.Item,{onClick:function(){return n(t)},children:"Delete"})]})]})})},te=function(){var e=x(),t=e.request,n=e.error,c=e.clearError,r=e.loading,s=Object(a.useState)([]),i=Object(u.a)(s,2),d=i[0],j=i[1],b=Object(a.useContext)(O),h=Object(a.useContext)(T),f=Object(a.useState)(1),v=Object(u.a)(f,2),p=v[0],g=v[1],y=Object(a.useState)(5),N=Object(u.a)(y,2),C=N[0],w=N[1],S=Object(a.useState)([]),D=Object(u.a)(S,2),A=D[0],E=D[1],P=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("api/admin/","GET",null,{Authorization:"Bearer ".concat(b.token)});case 3:n=e.sent,j(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,b.token]);Object(a.useEffect)((function(){P()}),[P]),Object(a.useEffect)((function(){var e=p*C,t=e-C,n=d.slice(t,e);E(n)}),[d,p,C]),Object(a.useEffect)((function(){n&&h.error(n),c()}),[n,c,h]);var F=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/admin/delete","POST",n,{Authorization:"Bearer ".concat(b.token)});case 3:a=e.sent,G([]),P(),h.success(a.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/admin/block","POST",n,{Authorization:"Bearer ".concat(b.token)});case 3:a=e.sent,G([]),P(),h.success(a.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/admin/unlock","POST",n,{Authorization:"Bearer ".concat(b.token)});case 3:a=e.sent,G([]),P(),h.success(a.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/admin/add_admin","POST",n,{Authorization:"Bearer ".concat(b.token)});case 3:a=e.sent,G([]),P(),h.success(a.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/admin/remove_admin","POST",n,{Authorization:"Bearer ".concat(b.token)});case 3:a=e.sent,G([]),P(),h.success(a.message),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(a.useState)([]),z=Object(u.a)(I,2),H=z[0],G=z[1];return r?Object(m.jsx)(k,{}):Object(m.jsxs)("div",{children:[!r&&!!d.length&&Object(m.jsx)(W,{currentPage:p,paginatePrev:function(){p>1&&g(p-1)},paginateNext:function(e){p!==e.length&&g(p+1)},pageSize:function(e){w(Number(e.target.value)),g(1)},postsPerPage:C,totalPosts:d.length,paginate:function(e,t){e.target.active?e.target.active=!0:e.target.active=!1,g(t)}}),Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[!r&&!!d.length&&Object(m.jsx)(X,{search:function(e){var t=d.filter((function(t){return t.email.includes(e.target.value)}));E(t)}}),Object(m.jsx)(ee,{users:H,deleteHandler:F,blockHandler:L,unlockHandler:Y,addAdminHandler:B,removeAdminHandler:M})]}),!r&&!!A.length&&Object(m.jsx)($,{users:A,onToggleUser:function(e){H.includes(e)?G((function(t){return t.filter((function(t){return t!==e}))})):G((function(t){return t.concat(e)}))},getAllCheck:function(){0===H.length?d.forEach((function(e){G((function(t){return t.concat(e._id)}))})):G([])},selectedUsers:H})]})},ne=n(87),ae=function(e){var t=e.user;return Object(m.jsx)(ne.a,{className:"mb-2",children:Object(m.jsxs)(ne.a.Body,{children:[Object(m.jsx)(ne.a.Title,{children:t.email}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Registration date"}),Object(m.jsx)(ne.a.Text,{children:t.registrationDate.slice(0,10).split("-").reverse().join("-")}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Last login date"}),Object(m.jsx)(ne.a.Text,{children:t.lastLogin.slice(0,10).split("-").reverse().join("-")}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Number of notes"}),Object(m.jsx)(ne.a.Text,{children:t.owner.length}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Active"}),Object(m.jsx)(ne.a.Text,{children:t.active?"online":"not online"}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Status"}),Object(m.jsx)(ne.a.Text,{children:t.block?"blocked":"not blocked"}),Object(m.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:"Access"}),Object(m.jsx)(ne.a.Text,{children:t.admin?"admin":"user"})]})})},ce=function(){var e=x(),t=e.loading,n=e.request,c=e.error,r=e.clearError,s=Object(a.useContext)(O),i=A(),d=Object(a.useState)([]),j=Object(u.a)(d,2),b=j[0],h=j[1],f=Object(a.useState)(),v=Object(u.a)(f,2),g=v[0],C=v[1],w=Object(p.g)().id,S=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/admin/".concat(w),"GET",null,{Authorization:"Bearer ".concat(s.token)});case 3:t=e.sent,C(t),h(t.owner),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n,s.token,w]);Object(a.useEffect)((function(){S()}),[S]);var D=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/date/delete","POST",Object(y.a)({},t),{Authorization:"Bearer ".concat(s.token)});case 3:a=e.sent,S(),i.success(a.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c&&(i.error(c),r())}),[c,r,i]),t?Object(m.jsx)(k,{}):Object(m.jsx)("div",{className:"container pb-2 pt-2",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:" col-lg-4",children:[" ",!t&&g&&Object(m.jsx)(ae,{user:g})]}),Object(m.jsxs)("div",{className:"col-lg-8",children:[" ",!t&&Object(m.jsx)(N,{noteList:b,deleteNoteHandler:D})]})]})})},re="userData",se=(n(75),function(){var e=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(a.useState)(null),O=Object(u.a)(h,2),x=O[0],f=O[1],m=Object(a.useState)(!1),v=Object(u.a)(m,2),p=v[0],g=v[1],y=Object(a.useCallback)((function(e,t,n,a){c(e),o(t),b(n),f(a),localStorage.setItem(re,JSON.stringify({userId:t,token:e,admin:n,user:a}))}),[]),k=Object(a.useCallback)((function(){c(null),o(null),b(!1),f(null),localStorage.removeItem(re)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(re)||"{}");e&&e.token&&y(e.token,e.userId,e.admin,e.user),g(!0)}),[y]),{login:y,logout:k,token:n,userId:i,ready:p,admin:j,email:x}}(),t=e.token,n=e.login,c=e.logout,r=e.userId,s=e.ready,i=e.admin,o=e.email,l=!!t,d=function(e,t){return e&&t?Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/calendar",exact:!0,children:Object(m.jsx)(R,{})}),Object(m.jsx)(p.b,{path:"/notes",exact:!0,children:Object(m.jsx)(E,{})}),Object(m.jsx)(p.b,{path:"/admin",exact:!0,children:Object(m.jsx)(te,{})}),Object(m.jsx)(p.b,{path:"/admin/:id",children:Object(m.jsx)(ce,{})}),Object(m.jsx)(p.a,{to:"/calendar",exact:!0})]}):e?Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/calendar",exact:!0,children:Object(m.jsx)(R,{})}),Object(m.jsx)(p.b,{path:"/notes",exact:!0,children:Object(m.jsx)(E,{})}),Object(m.jsx)(p.a,{to:"/calendar",exact:!0})]}):Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/",exact:!0,children:Object(m.jsx)(P,{})}),Object(m.jsx)(p.a,{to:"/",exact:!0})]})}(l,i),j=A(),b=j.error,x=j.success;return s?Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(O.Provider,{value:{token:t,login:n,logout:c,userId:r,isAuthenticated:l,admin:i,email:o},children:Object(m.jsxs)(T.Provider,{value:{error:b,success:x},children:[Object(m.jsxs)(h.a,{children:[Object(m.jsx)(v,{}),Object(m.jsx)("div",{children:d})]}),Object(m.jsx)(D.a,{hideProgressBar:!0,autoClose:3e3})]})})}):Object(m.jsx)(k,{})}),ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(se,{})}),document.getElementById("root")),ie()}},[[76,1,2]]]);
//# sourceMappingURL=main.42430442.chunk.js.map